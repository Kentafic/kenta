/* =========================================================
   KENTA CHATBOT ‚Äî ONLY
   File: styles/chatbot.css
========================================================= */

/* ============= L·ªöP B·ªåC TRANG CHATBOT ============= */

/* Desktop */
.chatbotPage {
  min-height: 100vh;
  background: #f5f9ff;
  display: flex;
  justify-content: center;
  align-items: flex-start;
   padding-top: 60px;         /* üëà ƒê·∫®Y L√äN */
  padding-bottom: 40px;
}

.chatbotCard {
  width: 100%;
  max-width: 1400px;
  padding: 0 16px;
}

/* ============= KHUNG CH√çNH C·ª¶A LOANCHATBOT ============= */

/* wrapper ngo√†i c√πng c·ªßa khung chat */
:global(.chat-wrapper) {
  display: flex;
  justify-content: center;
  width: 100%;
  min-height:0;
}

/* box tr·∫Øng ch·ª©a to√†n b·ªô n·ªôi dung chat (desktop) */
:global(.chat-box) {
  width: 100%;
  max-width: 420px;
  background: #ffffff;
  border-radius: 24px;
  padding: 16px;
  box-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
  border: 1px solid #e5e7eb;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* v√πng CU·ªòN tin nh·∫Øn */
:global(.chat-body) {
  padding: 12px 16px;
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
}

/* ============= SCROLLBAR GI·ªêNG ZALO (CHUNG) ============= */

/* Firefox */
:global(.chat-wrapper .chat-body) {
  scrollbar-width: thin;
  scrollbar-color: #c8c8c8 #f0f3f7;
}

/* Chrome / Edge / Safari */
:global(.chat-wrapper .chat-body::-webkit-scrollbar) {
  width: 6px;
}

:global(.chat-wrapper .chat-body::-webkit-scrollbar-track) {
  background: #f0f3f7 !important;
  border-radius: 10px;
}

:global(.chat-wrapper .chat-body::-webkit-scrollbar-thumb) {
  background: #c8c8c8 !important;
  border-radius: 10px;
}

:global(.chat-wrapper .chat-body::-webkit-scrollbar-thumb:hover) {
  background: #b3b3b3 !important;
}

/* ============= MOBILE ============= */

@media (max-width: 768px) {
  .chatbotPage {
    background: #f3f4ff;
     padding-top: 56px;   /* üëà CH·ªàNH CON S·ªê N√ÄY */
    padding-bottom: 0;
  }

  .chatbotCard {
    width: 100%;
    max-width: 420px;
    margin: 0 auto;
    padding: 0;
  }

  :global(.chat-wrapper) {
    justify-content: flex-start;
    width: 100%;
  }

  :global(.chat-box) {
    width: 100%;
    max-width: 100%;
    padding: 12px;
    border-radius: 0;
    border: none;
    box-shadow: none;
    display: flex;
    flex-direction: column;
  }

  :global(.chat-footer) {
    padding: 12px;
    border-top: 1px solid #eef2ff;
    background: rgba(255, 255, 255, 0.95);
    position: sticky;
    bottom: env(safe-area-inset-bottom);
  }

  :global(.option-btn),
  :global(.chat-send-btn) {
    -webkit-tap-highlight-color: transparent;
  }

  /* (tu·ª≥ ch·ªçn) N·∫øu b·∫°n v·∫´n mu·ªën ph√° container cha ·ªü trang CHATBOT:
     - Gi·ªØ nguy√™n block n√†y.
     - N·∫øu s·ª£ ·∫£nh h∆∞·ªüng trang kh√°c, h√£y ƒë·∫£m b·∫£o file n√†y CH·ªà import trong trang chatbot. */
  :global(.container),
  :global(.page-wrapper),
  :global(.content-wrapper),
  :global(.site-content),
  :global(main),
  :global(section),
  :global(.section) {
    max-width: 100% !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  :global(body) {
    overflow-x: hidden !important;
  }

  :global(#__next) {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* SAFE AREA (iOS notch‚Ä¶) */
@supports (padding: env(safe-area-inset-bottom)) {
  .chatbotCard {
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
  }

  :global(.chat-footer) {
    padding-bottom: calc(12px + env(safe-area-inset-bottom));
  }
}

/* ============= BUBBLE & AVATAR ============= */

:global(.bot-bubble) {
  background: #ffffff;
  border-radius: 14px;
  padding: 12px 16px;
  max-width: 78%;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.06);
  font-size: 15px;
  line-height: 1.6;
  animation: fadeIn 0.25s ease-out;
}

:global(.user-bubble) {
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  color: #ffffff;
  border-radius: 14px;
  padding: 12px 16px;
  max-width: 78%;
  font-weight: 500;
  box-shadow: 0 6px 14px rgba(37, 99, 235, 0.35);
  animation: popIn 0.25s ease-out;
}

:global(.avatar) {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  object-fit: cover;
}

:global(.bubble-row) {
  display: flex;
  gap: 10px;
  margin-bottom: 12px;
  align-items: flex-end;
}

:global(.bubble-row.user) {
  justify-content: flex-end;
}

/* ============= TYPING INDICATOR ============= */

:global(.typing) {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 14px;
  background: #ffffff;
  border-radius: 14px;
  width: 60px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

:global(.dot) {
  width: 6px;
  height: 6px;
  background: #a7b3c5;
  border-radius: 50%;
  animation: blink 1.4s infinite;
}

:global(.dot:nth-child(2)) {
  animation-delay: 0.2s;
}

:global(.dot:nth-child(3)) {
  animation-delay: 0.4s;
}

/* ============= INPUT BAR ============= */

:global(.chat-input-bar) {
  display: flex;
  padding: 10px 12px;
  background: #ffffff;
  border-top: 1px solid #eaeaea;
  gap: 10px;
}

:global(.chat-input) {
  flex: 1;
  border: 1px solid #d1d5db;
  border-radius: 999px;
  padding: 10px 16px;
  font-size: 15px;
  background: #f9fafb;
}

:global(.chat-send-btn) {
  background: #2563eb;
  border: none;
  border-radius: 999px;
  padding: 10px 14px;
  color: #ffffff;
  cursor: pointer;
  font-weight: 600;
}

/* ============= ANIMATION KEYFRAMES ============= */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes popIn {
  from {
    opacity: 0;
    transform: scale(0.93);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes blink {
  0% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.3;
  }
}

/* scrollbar ‚Äúnh·∫π‚Äù cho m·ªçi ph·∫ßn t·ª≠ con trong chatbot */
.kenta-chatbot *::-webkit-scrollbar {
  width: 4px;
}

.kenta-chatbot *::-webkit-scrollbar-track {
  background: transparent;
}

.kenta-chatbot *::-webkit-scrollbar-thumb {
  background-color: #d0d7ff !important;
  border-radius: 999px;
}
/* =========================
   KENTA ‚Äì LOAN REPORT FONT FIX
   Ch·ªâ √°p d·ª•ng cho ph·∫ßn "Nh·∫≠n x√©t"
========================= */

.kenta-loan-report,
.kenta-loan-report * {
  font-family: "Be Vietnam Pro", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}

/* Title */
.kenta-loan-report h3,
.kenta-loan-report .report-title {
  font-weight: 700;
  letter-spacing: -0.2px;
}

/* N·ªôi dung ph√¢n t√≠ch */
.kenta-loan-report p,
.kenta-loan-report li,
.kenta-loan-report span {
  font-weight: 400;
  letter-spacing: -0.1px;
}

/* Badge nh∆∞ LTV / DSR */
.kenta-loan-report .badge,
.kenta-loan-report .metric {
  font-weight: 600;
  font-size: 12px;
}
/* =========================================
   DESKTOP ‚Äî FIX: PAGE WRAPPERS PUSHING DOWN
   Ch·ªâ √°p d·ª•ng trong trang chatbot
========================================= */
@media (min-width: 769px) {
  /* 1) K√©o c·∫£ trang chatbot l√™n s√°t header h∆°n */
  .chatbotPage {
    padding-top: 16px !important;   /* th·ª≠ 16 / 24 / 32 */
  }

  /* 2) Quan tr·ªçng: reset c√°c wrapper global nh∆∞ng CH·ªà TRONG chatbot */
  .kenta-chatbot :global(.container),
  .kenta-chatbot :global(.page-wrapper),
  .kenta-chatbot :global(.content-wrapper),
  .kenta-chatbot :global(.site-content),
  .kenta-chatbot :global(main),
  .kenta-chatbot :global(section),
  .kenta-chatbot :global(.section) {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }

  /* 3) Ch·ªëng ‚ÄúcƒÉn gi·ªØa d·ªçc‚Äù v√¥ t√¨nh t·ª´ wrapper */
  .kenta-chatbot :global(.chat-wrapper) {
    min-height: unset !important;        /* b·ªè 100% ƒë·ªÉ kh√¥ng b·ªã chi ph·ªëi */
    align-items: flex-start !important;
  }
}
/* =========================================
   DESKTOP ‚Äî HARD LIFT CHAT BOX (SURE WIN)
========================================= */
@media (min-width: 769px) {
  /* k√©o c·∫£ khung chat l√™n */
  .kenta-chatbot :global(.chat-box) {
    transform: translateY(-120px) !important;  /* th·ª≠ -80 / -120 / -160 */
  }

  /* n·∫øu v·∫´n c√≤n kho·∫£ng tr·ªëng do padding-top c·ªßa page */
  .chatbotPage {
    padding-top: 0 !important;
  }
}
@media (min-width: 769px) {
  .kenta-chat-frame {
    margin-top: 16px !important; /* override marginTop 140 */
    margin-left: auto !important;
    margin-right: auto !important;
  }
}
:global(.chat-body) {
  padding-bottom: calc(12px + env(safe-area-inset-bottom) + 56px);
}
/* =====================================
   MOBILE iOS ‚Äî FIX C·ª®NG KHUNG CHAT (SURE WIN)
   - Kh√¥ng page scroll
   - Khung chat fixed trong viewport
   - Ch·ªâ chat-body scroll
===================================== */
@media (max-width: 768px) {
  /* 1) Trang chatbot kh√¥ng t·ª± t·∫°o kho·∫£ng ƒë·ªám ƒë·∫©y xu·ªëng n·ªØa */
  .chatbotPage {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    min-height: 100vh;
  }

  /* 2) FIX C·ª®NG frame (quan tr·ªçng nh·∫•t) */
  .kenta-chat-frame {
    position: fixed;
    left: 0;
    right: 0;

    /* chi·ªÅu cao header mobile (logo KENTA) */
    top: 56px;

    /* ch·ª´a safe area ƒë√°y */
    bottom: env(safe-area-inset-bottom);

    width: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 999;
    background: #f3f4ff;
  }

  /* 3) chat-box chi·∫øm to√†n b·ªô chi·ªÅu cao frame */
  :global(.chat-box) {
    flex: 1;
    height: 100%;
    min-height: 0;
    border-radius: 0 !important;
    border: none !important;
    box-shadow: none !important;
    padding: 12px !important;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* 4) CH·ªà chat-body ƒë∆∞·ª£c scroll */
  :global(.chat-body) {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;

    /* ch·ª´a ch·ªó cho input */
    padding-bottom: calc(72px + env(safe-area-inset-bottom)) !important;
  }

  /* 5) Input sticky ƒë√°y */
  :global(.chat-footer),
  :global(.chat-input-bar) {
    position: sticky;
    bottom: env(safe-area-inset-bottom);
    z-index: 2;
    background: rgba(255,255,255,0.96);
    backdrop-filter: blur(10px);
  }
}
body.chatbot-lock {
  height: 100%;
  overflow: hidden;
}
:global(.chat-body) { padding-bottom: ... }

